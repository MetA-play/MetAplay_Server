syntax = "proto3";
package Protocol;

import "google/protobuf/timestamp.proto";

option csharp_namespace = "Google.Protobuf.Protocol"; //C#파일의 네임스페이스 이름\


// ---------------------------------------------------- User --------------------------------------------------------------- \\
message UserInfo {
	string NickName = 1;
}

// ---------------------------------------------------- Room --------------------------------------------------------------- \\
message RoomSetting {
	string Name = 1;
	int32 MaxPlayer =2;
	GameType gameType = 3;
}

message RoomInfo {
	int32 Id = 1;
	int32 CurrentPersonnel = 2;
	RoomSetting Setting = 3;
}

// ---------------------------------------------------- Type ------------------------------------------------------ \\
enum SceneType {
	Main = 0;
	Lobby = 1;
	Game = 2;
}

enum GameType{
	AvoidLog = 0;
	DoNotFall = 1;
}

enum GameObjectType {
	None = 0;
	Player = 1;
	Room = 2;
}

// ------------------------------------------- State ----------------------------------------------- \\
enum ObjectState {
	Idle = 0;
	Move = 1;
	Jump = 2;
	Stun = 3;
	Die = 4;
}

enum GameState {
	Waiting = 0;
	Playing = 1;
	Ending = 2;
}

// ------------------------------------------- Object ----------------------------------------------- \\
enum MoveDir {
	Front = 0;
	Left = 1;
	Right = 2;
	Back = 3;
}

message Vector {
	float X = 1;
	float Y = 2;
	float Z = 3;
}

message TransformInfo {
	MoveDir Dir = 1;
	Vector Pos = 2;
	Vector Rot = 3;
	Vector Scale = 4;
}

message ObjectInfo {
	int32 Id = 1;
	ObjectState State = 2;
	TransformInfo Transform = 3;
	string PrefabName = 4;
}

// ---------------------------------------------------- Message Id --------------------------------------------------------------- \\
enum MsgId {
	C_CREATEROOM_REQ = 0;
	S_CREATEROOM_RES = 1;
	C_JOINROOM_REQ = 2;
	S_JOINROOM_RES = 3;
	S_ENTER_GAME = 5;
	S_LEAVE_GAME = 6;
	S_SPAWN = 7;
	S_DESPAWN = 8;
	C_MOVE = 9;
	S_MOVE = 10;
	C_CHAT = 11;
	S_CHAT = 12;
	C_UPDATE_GAME_STATE_REQ = 13;
	S_UPDATE_GAME_STATE_RES = 14;
}

// ------------------------------------------------------ Packet ----------------------------------------------------------------- \\
message C_Chat{
	string content = 1;
}

message S_Chat{
	int32 playerId = 1;
	string content = 2;
}

// -------------------------------------- Lobby ----------------------------------- \\
message C_CreateroomReq {
	RoomSetting Setting = 1;
}

message S_CreateroomRes {
	int32 ObjectId = 1;
	int32 RoomId = 2;
}

message C_JoinroomReq {
	int32 RoomId = 1;
}

message S_JoinroomRes {
	int32 RoomId = 1;
}

// -------------------------------------- InGame ----------------------------------- \\
message S_EnterGame {
	ObjectInfo Player = 1;
}

message S_LeaveGame {
}

message S_Spawn {
	repeated ObjectInfo Objects = 1;
}

message S_Despawn {
	repeated int32 ObjectId = 1;
}

message C_Move {
	ObjectState State = 1;
	TransformInfo Transform = 2;
}

message S_Move {
	int32 Id = 1;
	ObjectState State = 2;
	TransformInfo Transform = 3;
}

message C_UpdateGameStateReq {
	GameState State = 1;
}

message S_UpdateGameStateRes {
	GameState State = 1;
}
